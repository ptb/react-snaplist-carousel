{"version":3,"file":"index.js","sources":["../src/utils.ts","../node_modules/style-inject/dist/style-inject.es.js","../src/SnapList.tsx","../src/smoothScroll.ts","../src/useScroll.ts","../src/useDragToScroll.ts","../src/useVisibleElements.ts"],"sourcesContent":["export const mergeStyles = (...classnames: (string | null | undefined)[]) => classnames.filter(Boolean).join(' ');\n\ninterface Styles extends CSSStyleDeclaration {\n  scrollSnapAlign: string;\n  scrollPaddingLeft: string;\n  scrollPaddingRight: string;\n  scrollPaddingTop: string;\n  scrollPaddingBottom: string;\n}\n\nexport const mapStyles = ($item: HTMLElement) => {\n  const styles = window.getComputedStyle($item) as Styles;\n  const paddingLeft = parseInt(styles.paddingLeft || '');\n  const paddingRight = parseInt(styles.paddingRight || '');\n  const paddingTop = parseInt(styles.paddingTop || '');\n  const paddingBottom = parseInt(styles.paddingBottom || '');\n  const [snapAlign] = (typeof styles.scrollSnapAlign === 'string' &&\n    styles.scrollSnapAlign.split(' ')) || [];\n  const scrollPaddingLeft = parseInt(styles.scrollPaddingLeft || '');\n  const scrollPaddingRight = parseInt(styles.scrollPaddingRight || '');\n  const scrollPaddingTop = parseInt(styles.scrollPaddingTop || '');\n  const scrollPaddingBottom = parseInt(styles.scrollPaddingBottom || '');\n  return {\n    paddingLeft,\n    paddingRight,\n    paddingTop,\n    paddingBottom,\n    snapAlign,\n    scrollPaddingLeft,\n    scrollPaddingRight,\n    scrollPaddingTop,\n    scrollPaddingBottom,\n  };\n};\n\nexport const mapItem = ({\n  $item,\n  viewport,\n}: {\n  $item: HTMLElement;\n  viewport: { offsetLeft: number; offsetTop: number };\n}) => {\n  const { paddingLeft, paddingRight, paddingTop, paddingBottom, snapAlign } = mapStyles($item);\n  const left = $item.offsetLeft - viewport.offsetLeft + paddingLeft;\n  const width = $item.offsetWidth - paddingLeft - paddingRight;\n  const right = left + width;\n  const top = $item.offsetTop - viewport.offsetTop + paddingTop;\n  const height = $item.offsetHeight - paddingBottom - paddingTop;\n  const bottom = top + height;\n\n  return { left, width, right, top, height, bottom, paddingLeft, paddingRight, paddingTop, paddingBottom, snapAlign };\n};\n\nexport const isTouchDevice = () =>\n  !!(\n    typeof window !== 'undefined' &&\n    ('ontouchstart' in window ||\n      (window.DocumentTouch && typeof document !== 'undefined' && document instanceof window.DocumentTouch))\n  ) || !!(typeof navigator !== 'undefined' && (navigator.maxTouchPoints || navigator.msMaxTouchPoints));\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import * as React from 'react';\nimport { mergeStyles } from './utils';\n\nimport styles from './styles.css';\n\ninterface CarouselProps {\n  direction: 'horizontal' | 'vertical';\n  disableScroll?: boolean;\n  width?: string;\n  height?: string;\n  scrollPadding?: {\n    top?: string;\n    right?: string;\n    bottom?: string;\n    left?: string;\n  };\n  hideScrollbar?: boolean;\n  disabled?: boolean;\n  className?: string;\n}\n\nconst SnapListComponent: React.FC<CarouselProps> = (\n  {\n    children,\n    direction = 'horizontal',\n    disableScroll = false,\n    width,\n    height,\n    scrollPadding,\n    hideScrollbar = true,\n    disabled = false,\n    className,\n  },\n  ref: React.Ref<HTMLDivElement>,\n) => (\n  <div\n    className={mergeStyles(\n      styles.snaplist,\n      styles[`snaplist_${direction}`],\n      disabled ? null : styles[`snaplist_active_${direction}`],\n      disableScroll ? styles.snaplist_scroll_disabled : styles[`snaplist_scroll_${direction}`],\n      hideScrollbar ? styles.snaplist_hide_scrollbar : null,\n      className,\n    )}\n    style={{\n      width,\n      height,\n      scrollPaddingTop: scrollPadding?.top ?? '0px',\n      scrollPaddingRight: scrollPadding?.right ?? '0px',\n      scrollPaddingBottom: scrollPadding?.bottom ?? '0px',\n      scrollPaddingLeft: scrollPadding?.left ?? '0px',\n    }}\n    ref={ref}\n  >\n    {children}\n  </div>\n);\n\ntype WithChildren<T> = T & { children?: React.ReactNode };\n\nexport const SnapList = React.forwardRef<HTMLDivElement, WithChildren<CarouselProps>>(SnapListComponent);\n\nexport const SnapItem: React.FC<{\n  margin?: {\n    top?: string;\n    right?: string;\n    bottom?: string;\n    left?: string;\n  };\n  width?: string;\n  height?: string;\n  snapAlign: 'start' | 'center' | 'end' | 'none';\n  forceStop?: boolean;\n  className?: string;\n}> = ({ children, margin, snapAlign = 'center', forceStop = false, width, height, className }) => (\n  <div\n    className={mergeStyles(\n      styles.snapitem,\n      styles[`snapitem_align_${snapAlign}`],\n      forceStop ? styles.snapitem_forcestop : null,\n      className,\n    )}\n    style={{\n      marginTop: margin?.top,\n      marginRight: margin?.right,\n      marginBottom: margin?.bottom,\n      marginLeft: margin?.left,\n      width,\n      height,\n    }}\n  >\n    {children}\n  </div>\n);\n","const easingOutQuint = (t: number, b: number, c: number, d: number) => c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n\nconst smoothScrollPolyfill = ({\n  node,\n  scrollTarget,\n  duration,\n}: {\n  node: HTMLDivElement;\n  scrollTarget: { left: number; top: number };\n  duration: number;\n}) => {\n  const startTime = Date.now();\n  const offsetLeft = node.scrollLeft;\n  const offsetTop = node.scrollTop;\n  const gapHorizontal = scrollTarget.left - offsetLeft;\n  const gapVertical = scrollTarget.top - offsetTop;\n  let interrupt = false;\n\n  const cleanup = () => {\n    node.removeEventListener('wheel', cancel); // eslint-disable-line @typescript-eslint/no-use-before-define\n    node.removeEventListener('touchstart', cancel); // eslint-disable-line @typescript-eslint/no-use-before-define\n  };\n\n  const step = () => {\n    const elapsed = Date.now() - startTime;\n    const percentage = elapsed / duration;\n    if (interrupt) return;\n    if (percentage > 1) {\n      cleanup();\n      return;\n    }\n    node.scrollLeft = easingOutQuint(elapsed, offsetLeft, gapHorizontal, duration);\n    node.scrollTop = easingOutQuint(elapsed, offsetTop, gapVertical, duration);\n    requestAnimationFrame(step);\n  };\n\n  const cancel = () => {\n    interrupt = true;\n    cleanup();\n  };\n\n  node.addEventListener('wheel', cancel, { passive: true });\n  node.addEventListener('touchstart', cancel, { passive: true });\n\n  step();\n\n  return cancel;\n};\n\nconst hasNativeSmoothScroll = () => {\n  let supports = false;\n  const fakeScrollToOptions = {\n    top: 0,\n    get behavior() {\n      supports = true;\n      return 'smooth';\n    },\n  };\n  try {\n    const div = document.createElement('div');\n    div.scrollTo(fakeScrollToOptions as any);\n  } catch (err) {} // eslint-disable-line no-empty\n  return supports;\n};\n\nexport const smoothScroll = (\n  node: HTMLDivElement | null,\n  scrollTarget: { left: number; top: number },\n  duration: number,\n) => {\n  if (!node) return;\n  if (hasNativeSmoothScroll()) {\n    return node.scrollTo({\n      left: scrollTarget.left,\n      top: scrollTarget.top,\n      behavior: 'smooth',\n    });\n  } else {\n    return smoothScrollPolyfill({ node, scrollTarget, duration });\n  }\n};\n","import { RefObject, useCallback } from 'react';\n\nimport { smoothScroll } from './smoothScroll';\nimport { mapItem, mapStyles } from './utils';\n\nconst toArray = ($items: HTMLCollection) => {\n  const children = [];\n  for (let index = 0; index < $items.length; index++) {\n    const $item = $items[index] as HTMLElement;\n    children.push($item);\n  }\n  return children;\n};\n\nconst normalize = (value: number, { min, max }: { min: number; max: number }) => {\n  return Math.min(max, Math.max(min, value));\n};\nexport const useScroll = ({ ref }: { ref: RefObject<any> }) => {\n  const getScrollFor = useCallback(\n    (\n      element: number,\n    ):\n      | {\n          left: number;\n          top: number;\n        }\n      | undefined => {\n      const $viewport: HTMLElement = ref.current;\n      if (!$viewport) return;\n      const $items = toArray($viewport.children);\n      const $item = element >= 0 && $items.length ? $items[element] : null;\n\n      if (!$item) return;\n      const viewportStyles = mapStyles($viewport);\n      const viewport = {\n        left: $viewport.scrollLeft,\n        width: $viewport.offsetWidth,\n        right: $viewport.scrollLeft + $viewport.offsetWidth,\n        top: $viewport.scrollTop,\n        height: $viewport.offsetHeight,\n        bottom: $viewport.scrollTop + $viewport.offsetHeight,\n        offsetLeft: $viewport.offsetLeft,\n        offsetTop: $viewport.offsetTop,\n        paddingLeft: mapStyles($items[0]).paddingLeft,\n        paddingRight: mapStyles($items[$items.length - 1]).paddingRight,\n        paddingTop: mapStyles($items[0]).paddingTop,\n        paddingBottom: mapStyles($items[$items.length - 1]).paddingBottom,\n        scrollPaddingLeft: viewportStyles.scrollPaddingLeft,\n        scrollPaddingRight: viewportStyles.scrollPaddingRight,\n        scrollPaddingTop: viewportStyles.scrollPaddingTop,\n        scrollPaddingBottom: viewportStyles.scrollPaddingBottom,\n        scrollWidth: $viewport.scrollWidth,\n        scrollHeight: $viewport.scrollHeight,\n      };\n\n      const item = mapItem({ $item, viewport });\n\n      let target = { left: 0, top: 0 };\n      switch (item.snapAlign) {\n        case 'start':\n          target = {\n            left: item.left - item.paddingLeft - viewport.paddingLeft - viewport.scrollPaddingLeft,\n            top: item.top - item.paddingTop - viewport.paddingTop - viewport.scrollPaddingTop,\n          };\n          break;\n        case 'end':\n          target = {\n            left: item.left - (viewport.width - item.width) + viewport.paddingRight + viewport.scrollPaddingRight,\n            top: item.top - (viewport.height - item.height) + viewport.paddingBottom + viewport.scrollPaddingBottom,\n          };\n          break;\n        case 'center':\n          target = {\n            left: item.left - (viewport.width - item.width) / 2 - viewport.scrollPaddingLeft / 2,\n            top: item.top - (viewport.height - item.height) / 2 - viewport.scrollPaddingTop / 2,\n          };\n          break;\n      }\n\n      const maxLeftScroll = viewport.scrollWidth - viewport.width;\n      const maxTopScroll = viewport.scrollHeight - viewport.height;\n      return {\n        left: normalize(target.left, { min: 0, max: maxLeftScroll }),\n        top: normalize(target.top, { min: 0, max: maxTopScroll }),\n      };\n    },\n    [ref],\n  );\n\n  const goTo = useCallback(\n    (element: number) => {\n      const scrollTarget = getScrollFor(element);\n      if (scrollTarget) {\n        smoothScroll(ref.current, scrollTarget, 800);\n      }\n    },\n    [getScrollFor, ref],\n  );\n\n  return goTo;\n};\n","import { useCallback, useRef, RefObject, useState } from 'react';\nimport { useEffect } from 'react';\nimport { mapItem } from './utils';\n\nimport styles from './stylesdrag.css';\nimport { useScroll } from './useScroll';\nimport { isTouchDevice } from './utils';\n\n// as found on stackoverflow: https://stackoverflow.com/a/19277804\nconst getClosest = (l: number[], t: number): number => l.reduce((p, c) => (Math.abs(c - t) < Math.abs(p - t) ? c : p));\n\nconst getElementPositionX = ($viewport: HTMLElement, $item: HTMLElement): number => {\n  const viewport = {\n    width: $viewport.offsetWidth,\n    height: $viewport.offsetHeight,\n    offsetLeft: $viewport.offsetLeft,\n    offsetTop: $viewport.offsetTop,\n  };\n  const item = mapItem({ $item, viewport });\n  return item.left - (viewport.width / 2 - item.width / 2);\n};\n\nconst getElementPositionY = ($viewport: HTMLElement, $item: HTMLElement): number => {\n  const viewport = {\n    width: $viewport.offsetWidth,\n    height: $viewport.offsetHeight,\n    offsetLeft: $viewport.offsetLeft,\n    offsetTop: $viewport.offsetTop,\n  };\n  const item = mapItem({ $item, viewport });\n  return item.top - (viewport.height / 2 - item.height / 2);\n};\n\nconst dragThreshold = 2; // distance moved before isDragged is set to true and click on children is disabled\n\ninterface Styles extends CSSStyleDeclaration {\n  scrollSnapType: string;\n}\n\nexport const useDragToScroll = ({ ref, disabled = false }: { ref: RefObject<HTMLDivElement>; disabled?: boolean }) => {\n  const goToChildren = useScroll({ ref });\n  const elementPositionsX = useRef<number[]>([]);\n  const elementPositionsY = useRef<number[]>([]);\n  const timeout = useRef<number | null>(null);\n\n  const [isDragging, setIsDragging] = useState(false);\n  const isDown = useRef(false);\n  const startX = useRef(0);\n  const startY = useRef(0);\n  const slideX = useRef(0);\n  const slideY = useRef(0);\n  const originalScrollSnapType = useRef('');\n\n  // used to determine whether slider is scrolling. After scrolling ends, reset css classes\n  const handleScrolling = useCallback(() => {\n    if (timeout.current) clearTimeout(timeout.current);\n    timeout.current = setTimeout(() => {\n      if (!ref.current) return;\n      ref.current.removeEventListener('scroll', handleScrolling);\n      setIsDragging(false);\n      // Safari resets scroll position when removing the css class, manually\n      // setting the scroll property afterwards seems to fix the problem\n      // without flashing\n      const currentX = ref.current?.scrollLeft;\n      const currentY = ref.current?.scrollTop;\n      ref.current.classList.remove(styles.snaplist_drag);\n      ref.current.scrollLeft = currentX;\n      ref.current.scrollTop = currentY;\n    }, 100) as any;\n  }, [ref, timeout]);\n\n  const handleMouseDown = useCallback(\n    event => {\n      if (!ref.current) return;\n      event.preventDefault();\n      isDown.current = true;\n      startX.current = event.pageX - ref.current.offsetLeft;\n      slideX.current = ref.current.scrollLeft;\n      startY.current = event.pageY - ref.current.offsetTop;\n      slideY.current = ref.current.scrollTop;\n    },\n    [ref],\n  );\n\n  const handleMouseMove = useCallback(\n    event => {\n      if (!ref.current) return;\n      if (!isDown.current) return;\n\n      const distanceMoved = Math.abs(startX.current - (event.pageX - ref.current.offsetLeft));\n      if (distanceMoved < dragThreshold) return; // skip further action, when not mouse movement is below threshold, thus no drag detected\n      if (timeout.current) clearTimeout(timeout.current);\n      if (!isDragging) {\n        setIsDragging(true);\n        const snapListStyles = window.getComputedStyle(ref.current) as Styles;\n        originalScrollSnapType.current = snapListStyles.scrollSnapType.toString();\n      }\n      ref.current.classList.add(styles.snaplist_drag);\n\n      const x = event.pageX - ref.current.offsetLeft;\n      const displaceX = x - startX.current;\n      ref.current.scrollLeft = slideX.current - displaceX;\n      const y = event.pageY - ref.current.offsetTop;\n      const displaceY = y - startY.current;\n      ref.current.scrollTop = slideY.current - displaceY;\n    },\n    [isDragging, ref],\n  );\n\n  const handleMouseUp = useCallback(() => {\n    if (!ref.current) return;\n    isDown.current = false;\n    if (!isDragging) return;\n    ref.current.addEventListener('scroll', handleScrolling);\n\n    if (originalScrollSnapType.current === 'none') return;\n\n    const dragEndPositionX = ref.current.scrollLeft;\n    const dragEndPositionY = ref.current.scrollTop;\n    const scrollTargetX = getClosest(elementPositionsX.current, dragEndPositionX);\n    const scrollTargetY = getClosest(elementPositionsY.current, dragEndPositionY);\n\n    const target =\n      scrollTargetX > 0\n        ? elementPositionsX.current.indexOf(scrollTargetX)\n        : elementPositionsY.current.indexOf(scrollTargetY);\n    goToChildren(target);\n  }, [ref, handleScrolling, goToChildren, isDragging]);\n\n  const handleClick = useCallback(\n    event => {\n      // we need this to prevent click events being fired on children\n      if (!isDragging) return;\n      event.stopPropagation();\n      setIsDragging(false);\n    },\n    [isDragging],\n  );\n\n  const registerEventListeners = useCallback(() => {\n    if (!ref.current) return;\n    ref.current.addEventListener('mousedown', handleMouseDown);\n    ref.current.addEventListener('click', handleClick);\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n  }, [ref, handleClick, handleMouseDown, handleMouseMove, handleMouseUp]);\n\n  const removeEventListeners = useCallback(() => {\n    if (!ref.current) return;\n    ref.current.removeEventListener('mousedown', handleMouseDown);\n    ref.current.removeEventListener('click', handleClick);\n    window.removeEventListener('mousemove', handleMouseMove);\n    window.removeEventListener('mouseup', handleMouseUp);\n  }, [ref, handleClick, handleMouseDown, handleMouseMove, handleMouseUp]);\n\n  useEffect(() => {\n    // skip on touch devices\n    if (!ref.current || isTouchDevice() || disabled) return;\n\n    const target = ref.current;\n    const children = target.children;\n    elementPositionsX.current = Array.from(children).map((element: HTMLElement) =>\n      getElementPositionX(target, element),\n    );\n    elementPositionsY.current = Array.from(children).map((element: HTMLElement) =>\n      getElementPositionY(target, element),\n    );\n\n    registerEventListeners();\n    return removeEventListeners;\n  }, [ref, registerEventListeners, removeEventListeners, disabled]);\n\n  return { isDragging, disable: removeEventListeners, enable: registerEventListeners };\n};\n","import { useEffect, useState, useCallback, RefObject } from 'react';\nimport { mapItem } from './utils';\n\nconst debounceHOF = (callback: () => void, ms: number) => {\n  let timeout: any;\n  return () => {\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      timeout = null;\n      callback();\n    }, ms);\n  };\n};\n\nexport const getVisibleChildren = ($viewport?: HTMLDivElement | null) => {\n  if (!$viewport) return { children: [], childrenInCenter: null };\n  const viewport = {\n    left: $viewport.scrollLeft,\n    width: $viewport.offsetWidth,\n    right: $viewport.scrollLeft + $viewport.offsetWidth,\n    top: $viewport.scrollTop,\n    height: $viewport.offsetHeight,\n    bottom: $viewport.scrollTop + $viewport.offsetHeight,\n    offsetLeft: $viewport.offsetLeft,\n    offsetTop: $viewport.offsetTop,\n    centerHorizontal: $viewport.scrollLeft + $viewport.offsetWidth / 2,\n    centerVertical: $viewport.scrollTop + $viewport.offsetHeight / 2,\n  };\n  const children = [];\n  const $items = $viewport.children;\n  let childrenInCenter = null;\n  for (let index = 0; index < $items.length; index++) {\n    const $item = $items[index] as HTMLElement;\n    const item = mapItem({ $item, viewport });\n    const isVisibleHorizontally = item.left >= viewport.left && item.right <= viewport.right;\n    const isVisibleVertically = item.top >= viewport.top && item.bottom <= viewport.bottom;\n    const isInCenterHorizontally = item.left <= viewport.centerHorizontal && item.right >= viewport.centerHorizontal;\n    const isInCenterVertically = item.top <= viewport.centerVertical && item.bottom >= viewport.centerVertical;\n    if (isVisibleHorizontally && isVisibleVertically) {\n      children.push(index);\n    }\n    if (isInCenterHorizontally && isInCenterVertically) {\n      childrenInCenter = index;\n    }\n  }\n  return { children, childrenInCenter };\n};\n\nexport const useVisibleElements = <T>(\n  {\n    debounce = 10,\n    ref,\n  }: {\n    ref: RefObject<HTMLDivElement>;\n    debounce?: number;\n  },\n  selector: (elements: number[], childrenInCenter: number | null) => T,\n): T => {\n  const [result, setResult] = useState<T>(selector([0], null));\n\n  const onChange = useCallback(() => {\n    const { children: newVisibleChildren, childrenInCenter: newChildrenInCenter } = getVisibleChildren(ref.current);\n    if (newVisibleChildren.length === 0) return;\n    const newResult = selector(newVisibleChildren, newChildrenInCenter);\n\n    setResult((result: T) => {\n      return JSON.stringify(newResult) !== JSON.stringify(result) ? newResult : result;\n    });\n  }, [ref, selector]);\n\n  const onChangeWithDebounce = useCallback(debounceHOF(onChange, debounce), [onChange]);\n\n  useEffect(() => {\n    const element = ref.current;\n    element?.addEventListener('scroll', onChangeWithDebounce);\n    window.addEventListener('resize', onChangeWithDebounce);\n    window.addEventListener('orientationchange', onChangeWithDebounce);\n    onChangeWithDebounce();\n    return () => {\n      element?.removeEventListener('scroll', onChangeWithDebounce);\n      window.removeEventListener('resize', onChangeWithDebounce);\n      window.removeEventListener('orientationchange', onChangeWithDebounce);\n    };\n  }, [onChangeWithDebounce, ref]);\n\n  return result;\n};\n"],"names":["React.createElement","React.forwardRef","useCallback","useRef","styles","useEffect"],"mappings":"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"}